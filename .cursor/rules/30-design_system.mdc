---
alwaysApply: true
---

# Design System — Sushi Kitchen

A small, opinionated design system for the docs site + dashboard UIs built on **Tailwind**, **shadcn/ui**, and **lucide-react**. It pulls names, taglines, badges, and routes directly from `tech_stack.mdc` (SSOT).

---

## Principles
1. **Legible by default** — strong contrast, accessible sizes, predictable layouts.
2. **Edge-first clarity** — apps show auth + exposure status up front.
3. **Composable** — one flexible card, one table, one form system.
4. **Batteries-included** — sensible defaults; minimal props for 80% cases.
5. **SSOT-driven** — UI reads from `tech_stack.mdc` only (no hardcoded labels/URLs).

---

## Tokens

### Color (CSS variables)
```css
:root {
  /* Base */
  --bg: 255 255 255;
  --fg: 17 24 39;         /* slate-900 */
  --muted: 100 116 139;   /* slate-500 */
  --divider: 226 232 240; /* slate-200 */

  /* Brand */
  --brand: 14 165 233;    /* sky-500 */
  --brand-ink: 2 132 199; /* sky-600 */

  /* Status */
  --ok: 34 197 94;        /* green-500 */
  --warn: 245 158 11;     /* amber-500 */
  --danger: 239 68 68;    /* red-500 */
  --beta: 99 102 241;     /* indigo-500 */
  --exp: 59 130 246;      /* blue-500 */

  /* Surfaces */
  --card: 248 250 252;    /* slate-50 */
  --elev: 241 245 249;    /* slate-100 */
}
@media (prefers-color-scheme: dark) {
  :root {
    --bg: 2 6 23;         /* slate-950 */
    --fg: 241 245 249;    /* slate-100 */
    --muted: 148 163 184; /* slate-400 */
    --divider: 30 41 59;  /* slate-800 */
    --card: 10 15 25;
    --elev: 15 23 42;
  }
}

Type scale

```css
:root {
  --step--1: 0.875rem;  /* 14 */
  --step-0:  1rem;      /* 16 */
  --step-1:  1.125rem;  /* 18 */
  --step-2:  1.25rem;   /* 20 */
  --step-3:  1.5rem;    /* 24 */
  --step-4:  1.875rem;  /* 30 */
  --step-5:  2.25rem;   /* 36 */
}

Spacing, Radius, Shadow
Spacing: 2, 3, 4, 6, 8, 10 (Tailwind p-2 … p-10)

Radius: rounded-xl (surfaces), rounded-2xl (hero/feature cards)

Shadow: shadow-sm (lists), shadow-md (cards), shadow-lg (modals)

Iconography (lucide-react)
Roll → icon

Hosomaki (core): cog

Futomaki (db): database

Nigiri (speech): mic

Uramaki (images): image

Ramen (video): film

Chirashi (data science): beaker

Temaki (builder): wrench

Inari (observability): activity

Gunkanmaki (security): shield

Sashimi (API/docs): file-text

Otsumami (utils): sparkles

App status → dot color

stable → --ok

beta → --beta

experimental → --exp

deprecated → --danger

Badges (maps from badges array in SSOT)
Token → Label → Style

automation → Automation → subtle brand

gateway → Gateway → subtle indigo

api → API → outline slate

rag → RAG → outline brand

chat → Chat → subtle slate

local → Local → subtle emerald

performance → Performance → outline violet

image → Image → subtle fuchsia

media → Media → subtle sky

render → Render → outline sky

analysis → Analysis → outline cyan

vector → Vector → outline stone

graph → Graph → outline amber

sql → SQL → outline slate

cache → Cache → outline emerald

queue → Queue → outline teal

fast → Fast → filled emerald

Shape: rounded-full chips (text-xs px-2.5 py-1 gap-1), optional left icon.

Layout
Page grid
1440px max width, centered

12-col CSS grid, gap-6

Left sidebar (nav) w-[280px]; content fills rest

Card grid
Responsive: grid-cols-1 sm:grid-cols-2 xl:grid-cols-3

Card: p-5 gap-4 rounded-xl shadow-md bg-[rgb(var(--card))]

Components
App Card (SSOT-driven)
Data source: tech_stack.mdc → { roll, name, tagline, status, docs.homepage, routes[], security }

Structure

Top: roll icon + name + status dot

Middle: tagline (2-line clamp)

Badges row

Footer actions:

Open (if any routes.public === true) → first public ingress

Docs → docs.homepage

Auth chip when security.auth_required === true

Accessibility

Entire card focusable (role="group"); Enter opens primary action

aria-describedby ties name to tagline

Status dot has aria-label="Status: Beta" etc.

Empty state

“No apps in this roll yet” with CTA to docs

Tables
Dense, sticky header, text-sm, hover zebra only

Sort affordance with icon; column min widths

Forms
shadcn/ui Form, Input, Select, Textarea

Labels always visible; helper text under field; red error with icon

Validation: zod schema with inline mapping

Modals/Sheets
Use sparingly (confirmations/details)

Close on Esc; backdrop click contextual

Toasts
Short verbs (“Saved”, “Updated”, “Rotated”)

Never reveal secrets; link to details page

Markdown (Docs)
Headings follow type scale (h1: step-5 … h4: step-2)

Code blocks via shiki/rehype + copy button

Admonitions: Note, Tip, Caution, Danger (color-coded)

Motion
Durations: 150–250ms UI; ~400ms page transitions

Easing: ease-out (enter), ease-in (exit)

Framer Motion on hero/feature rows; subtle only

Responsiveness & Dark Mode
Mobile-first; nav collapses to sheet

Cards stack; actions become icon-only at sm with tooltips

Dark mode auto via prefers-color-scheme + toggle

Ensure badge/status contrast ≥ 4.5:1 in dark

Content Style
Voice: concise, practical. Keep sushi metaphors to headlines/section intros.

Use the roll names consistently with their SSOT one-liners:

Hosomaki: core orchestration & inference

Futomaki: databases & knowledge stores

Nigiri: speech & interaction

Uramaki: visual & media (images)

Ramen: video & motion (edit, generate, analyze)

Chirashi: data science & compute

Temaki: builder & DIY tools

Inari: observability & telemetry

Gunkanmaki: security & identity

Sashimi: API & docs

Otsumami: optional utilities

Exposure & Security UI
If security.public_exposure === "internal_only" → lock icon + “Internal”

If auth_required === true & any public route → “Protected (edge auth)”

Tooltips briefly explain Caddy/Cloudflare + Authentik flow

Route mapping (from SSOT):

Open → routes.find(r => r.public)?.ingress (disabled if none)

Docs → docs.homepage

Status Chips
stable → “Stable”

beta → “Beta”

experimental → “Experimental”

deprecated → “Deprecated”

Include aria-label="Status: Beta"

Data Viz (Metabase/Grafana embeds)
Respect brand backgrounds; avoid bright reds unless critical

Legends outside charts on desktop; inside on mobile

Code Snippet — App Card (React + Tailwind)

```tsx
import { Card, CardContent, CardFooter } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  Shield, Film, Database, Mic, Image as Img, Beaker, Wrench, Activity,
  FileText, Sparkles, Cog
} from "lucide-react";

type RollId =
  | "hosomaki" | "futomaki" | "nigiri" | "uramaki" | "ramen"
  | "chirashi" | "temaki" | "inari" | "gunkanmaki" | "sashimi" | "otsumami";

const rollIcon: Record<RollId, any> = {
  hosomaki: Cog,
  futomaki: Database,
  nigiri: Mic,
  uramaki: Img,
  ramen: Film,
  chirashi: Beaker,
  temaki: Wrench,
  inari: Activity,
  gunkanmaki: Shield,
  sashimi: FileText,
  otsumami: Sparkles
};

export function AppCard({
  roll, name, tagline, status, badges, docs, routes, security
}: {
  roll: RollId;
  name: string;
  tagline: string;
  status: "stable" | "beta" | "experimental" | "deprecated";
  badges: string[];
  docs?: { homepage?: string };
  routes?: { public: boolean; ingress: string }[];
  security?: { auth_required?: boolean; public_exposure?: "behind_caddy_only" | "internal_only" };
}) {
  const Icon = rollIcon[roll];
  const publicRoute = routes?.find(r => r.public);

  return (
    <Card className="bg-[rgb(var(--card))] shadow-md rounded-xl border border-[rgb(var(--divider))]/50">
      <CardContent className="p-5">
        <div className="flex items-center gap-3">
          <Icon className="h-5 w-5 text-[rgb(var(--brand-ink))]" aria-hidden />
          <h3 className="text-base font-semibold text-[rgb(var(--fg))]">{name}</h3>
          <span
            aria-label={`Status: ${status}`}
            className="ml-auto inline-block h-2.5 w-2.5 rounded-full"
            style={{
              backgroundColor:
                status === "stable" ? `rgb(var(--ok))` :
                status === "beta" ? `rgb(var(--beta))` :
                status === "experimental" ? `rgb(var(--exp))` :
                `rgb(var(--danger))`
            }}
          />
        </div>

        <p id={`${name}-tag`} className="mt-2 text-sm text-[rgb(var(--muted))] line-clamp-2">
          {tagline}
        </p>

        <div className="mt-3 flex flex-wrap gap-2">
          {badges?.map(b => (
            <Badge key={b} variant="secondary" className="rounded-full text-xs">
              {b}
            </Badge>
          ))}
        </div>

        {security?.auth_required && (
          <div className="mt-3 text-xs text-[rgb(var(--muted))]">🔒 Protected at the edge</div>
        )}
        {security?.public_exposure === "internal_only" && (
          <div className="mt-1 text-xs text-[rgb(var(--muted))]">🔒 Internal only</div>
        )}
      </CardContent>

      <CardFooter className="p-5 pt-0 flex gap-3">
        <Button asChild disabled={!publicRoute}>
          <a href={publicRoute?.ingress || "#"} aria-disabled={!publicRoute}>Open</a>
        </Button>
        {docs?.homepage && (
          <Button asChild variant="outline">
            <a href={docs.homepage}>Docs</a>
          </Button>
        )}
      </CardFooter>
    </Card>
  );
}
QA Checklist (per PR)
Contrast ≥ 4.5:1 (text/icons on bg)

Keyboard reachable; focus rings visible

Status/badge mapping matches SSOT

Public vs. internal route handling correct

Dark mode verified

Copy checked for clarity (no secret values)

No hardcoded names/routes/ports; all from SSOT

Do / Don’t
Do

Pull labels/links from tech_stack.mdc

Keep cards short; deeper info lives in Docs

Mark preview/experimental clearly

Don’t

Hardcode app names/routes

Leak ports or internal hostnames in UI

Use metaphors inside control labels